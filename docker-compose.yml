# Lifecycle Dashboard - Local SQL Server
#
# Setup:
#   1. Copy .env.example to .env and set MSSQL_SA_PASSWORD
#   2. Run: docker-compose up -d
#   3. Set connection string via: dotnet user-secrets set "ConnectionStrings:LifecycleDb" "Server=localhost,1433;Database=LifecycleDashboard;User Id=sa;Password=YOUR_PASSWORD;TrustServerCertificate=True;Encrypt=False"

services:
  sql-server:
    image: mcr.microsoft.com/azure-sql-edge:latest
    container_name: lifecycle-sql
    environment:
      - ACCEPT_EULA=Y
      - MSSQL_SA_PASSWORD=${MSSQL_SA_PASSWORD:?Set MSSQL_SA_PASSWORD in .env file}
      - MSSQL_PID=Developer
    ports:
      - "1433:1433"
    volumes:
      - lifecycle-sqldata:/var/opt/mssql
    restart: unless-stopped

volumes:
  lifecycle-sqldata:
    driver: local
